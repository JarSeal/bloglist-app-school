{"version":3,"sources":["components/Togglable.js","components/NotificationBox.js","components/Blog.js","services/login.js","components/Login.js","components/CreateBlog.js","services/blogs.js","utils/localStorage.js","App.js","index.js"],"names":["Togglable","React","forwardRef","props","ref","useState","visible","setVisible","phaser","setPhaser","toggleVisibility","useImperativeHandle","p","v","className","style","position","maxWidth","display","keepButtonVisible","onClick","label","setTimeout","transitionDuration","top","right","title","children","displayName","timer","deleteButton","user","blog","handleDeleteClick","Blog","handleLikeClick","loadingLike","setLoadingLike","author","name","likes","paddingBottom","href","url","login","credentials","a","axios","post","response","data","handleLogin","e","username","password","setUser","setUsername","setPassword","setLoginNote","ls","preventDefault","loginService","setItem","JSON","stringify","msg","type","length","phase","loginForm","onSubmit","htmlFor","id","value","onChange","target","loginInfo","marginBottom","borderBottom","removeItem","handleLogout","Login","setClassName","note","setNote","transitionT","baseClass","clearTimeout","setPhaseClass","NotificationBox","template","push","action","handleConfirmation","concat","CreateBlog","handleCreateNew","blogRef","setTitle","setAuthor","setUrl","current","baseUrl","token","getAll","get","then","setToken","newToken","newBlog","newObject","config","headers","Authorization","likeBlog","put","deleteBlog","delete","localStorageAvailable","checkIfItemExists","key","Object","prototype","hasOwnProperty","call","window","localStorage","lsTest","test","initLocalStorage","getItem","defaultValue","App","useRef","blogs","setBlogs","useEffect","loggedUserJSON","u","parse","blogService","userId","newLikes","body","assign","updatedList","filter","b","result","newBlogs","status","undefined","errors","fontFamily","color","margin","sort","map","opacity","fontSize","textAlign","marginTop","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.1e085170.chunk.js","sourcesContent":["import React, { useState, useImperativeHandle } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport './Togglable.css';\r\n\r\nconst Togglable = React.forwardRef((props, ref) => {\r\n  const [visible, setVisible] = useState(false);\r\n  const [phaser, setPhaser] = useState(0);\r\n\r\n  const toggleVisibility = () => {\r\n    setPhaser(1);\r\n  };\r\n\r\n  useImperativeHandle(ref, () => {\r\n    return {\r\n      toggleVisibility\r\n    };\r\n  });\r\n\r\n  const setAreaClass = (p, v) => {\r\n    if(phaser > 0) {\r\n      setTimeout(() => {\r\n        if(phaser < 2)  {\r\n          setPhaser(phaser + 1);\r\n        } else {\r\n          setPhaser(0);\r\n          setVisible(!visible);\r\n        }\r\n      }, phaser === 2 ? 500 : 100);\r\n    }\r\n    return 'toggle-area phase-' + p + ' visi-' + v;\r\n  };\r\n\r\n  return (\r\n    <div className='togglable' style={{ position: 'relative', maxWidth: '960px' }}>\r\n      <div style={{ display: (visible || (!visible && phaser !== 0)) && !props.keepButtonVisible ? 'none' : '' }}>\r\n        <button onClick={toggleVisibility} className='toggle-button'>{props.label}</button>\r\n      </div>\r\n      <div className={setAreaClass(phaser, visible)} style={{ transitionDuration: '600ms' }}>\r\n        <div style={{\r\n          position: 'absolute',\r\n          top: '5px',\r\n          right: '5px'\r\n        }}>\r\n          <button\r\n            onClick={toggleVisibility}\r\n            title='cancel'\r\n            className='close-button'></button>\r\n        </div>\r\n        {props.children}\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nTogglable.propTypes = {\r\n  label: PropTypes.string.isRequired\r\n};\r\n\r\nTogglable.displayName = 'Togglable';\r\n\r\nexport default Togglable;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport './NotificationBox.css';\r\n\r\nlet timer;\r\n\r\nconst setPhaseClass = (length, phase, note, setNote, transitionT) => {\r\n  switch(phase) {\r\n  case 1:\r\n    clearTimeout(timer);\r\n    timer = setTimeout(() => {\r\n      setNote({ ...note, phase: 2 });\r\n    }, transitionT);\r\n    return ' notification--start';\r\n  case 2:\r\n    clearTimeout(timer);\r\n    if(length !== 0) {\r\n      timer = setTimeout(() => {\r\n        setNote({ ...note, phase: 3 });\r\n      }, length - 10);\r\n    }\r\n    return ' notification--middle';\r\n  case 3:\r\n    clearTimeout(timer);\r\n    timer = setTimeout(() => {\r\n      setNote({ ...note, phase: 4 });\r\n    }, 10);\r\n    return ' notification--end-begin';\r\n  case 4:\r\n    clearTimeout(timer);\r\n    timer = setTimeout(() => {\r\n      setNote({ msg: '', type: 0, length: 0, phase: 0 });\r\n    }, transitionT);\r\n    return ' notification--end-begin notification--end';\r\n  default: return '';\r\n  }\r\n};\r\n\r\nconst setClassName = (note, setNote, transitionT) => {\r\n  const { type, length, phase } = note;\r\n  let baseClass = 'notification' + setPhaseClass(length, phase, note, setNote, transitionT);\r\n  switch(type) {\r\n  case 1: return baseClass + ' notification--done';\r\n  case 2: return baseClass + ' notification--warning';\r\n  case 3: return baseClass + ' notification--error';\r\n  case 4: return baseClass + ' notification--warning notification--confirmation';\r\n  default: return baseClass + ' notification--hidden';\r\n  }\r\n};\r\n\r\nconst handleConfirmation = (note, setNote, transitionT) => {\r\n  setNote({ ...note, phase: 3 });\r\n  setTimeout(note.action, transitionT);\r\n};\r\n\r\nconst NotificationBox = ({ note, setNote }) => {\r\n  const transitionT = 300; // Start and end transition time in ms\r\n  const template = [];\r\n  if(note && note.msg.length) {\r\n    template.push(note.msg);\r\n    if(note.type === 4) {\r\n      template.push(<div key='confirm-area' className='notification__confirm-area'>\r\n        <button\r\n          onClick={() => handleConfirmation(note, setNote, transitionT)}\r\n          title='Confirm'\r\n          className='notification__button notification__button--confirm'\r\n          key='confirm-button'>Confirm</button>&nbsp;\r\n        <button\r\n          onClick={() => setNote({ ...note, phase: 3 })}\r\n          title='Cancel'\r\n          className='notification__button notification__button--cancel'\r\n          key='cancel-button'>Cancel</button>\r\n      </div>);\r\n    }\r\n    template.push(\r\n      <button\r\n        onClick={() => setNote({ ...note, phase: 3 })}\r\n        title='Close this notification'\r\n        className='close-button'\r\n        key='close-button'></button>\r\n    );\r\n  } else {\r\n    template.concat(null);\r\n  }\r\n  return <div className='notification-box-wrapper'>\r\n    <div className={setClassName(note, setNote, transitionT)} style={{ transitionDuration: transitionT + 'ms' }}>\r\n      {template}\r\n    </div>\r\n  </div>;\r\n};\r\n\r\nNotificationBox.propTypes = {\r\n  note: PropTypes.shape({\r\n    msg: PropTypes.string.isRequired,\r\n    type: PropTypes.number.isRequired,\r\n    length: PropTypes.number.isRequired,\r\n    phase: PropTypes.number.isRequired\r\n  }),\r\n  setNote: PropTypes.func.isRequired\r\n};\r\n\r\nexport default NotificationBox;\r\n","import React, { useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Togglable from './Togglable';\r\nimport './Blog.css';\r\n\r\nconst deleteButton = (user, blog, handleDeleteClick) => {\r\n  if(!user) return null;\r\n  return (\r\n    <div className='info-row align-right'>\r\n      <button className='delete-button' onClick={\r\n        () => handleDeleteClick(blog)\r\n      }>delete</button>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst Blog = ({ blog, handleLikeClick, handleDeleteClick, user }) => {\r\n  const [loadingLike, setLoadingLike] = useState(false);\r\n\r\n  return (\r\n    <div className='blog-item'>\r\n      <h3 className='title'>\r\n        {blog.title}\r\n        <span className='author'>{blog.author ? 'by ' + blog.author : blog.user ? 'by ' + blog.user.name : ''}</span>\r\n        <span className='likes-big'>{blog.likes}<span>likes</span></span>\r\n      </h3>\r\n      <Togglable label='info' keepButtonVisible='true'>\r\n        <div style={{ paddingBottom: '12px' }}>\r\n          <div className='info-row info-row--url'>\r\n            <span className='info-row__label'>URL: </span><a href={blog.url}>{blog.url}</a>\r\n          </div>\r\n          <div className='info-row info-row--likes'>\r\n            <span className='info-row__label'>Likes: </span>\r\n            {blog.likes}\r\n            <button\r\n              className={loadingLike ? 'like-button loading' : 'like-button'}\r\n              onClick={() => handleLikeClick(blog, loadingLike, setLoadingLike)}>\r\n              {loadingLike ? 'saving..' : 'like'}\r\n            </button>\r\n          </div>\r\n          <div className='info-row'>\r\n            <span className='info-row__label'>Creator: </span>{blog.user && blog.user.name ? blog.user.name : '--'}\r\n          </div>\r\n          {deleteButton(user, blog, handleDeleteClick)}\r\n        </div>\r\n      </Togglable>\r\n    </div>\r\n  );\r\n};\r\n\r\nBlog.propTypes = {\r\n  blog: PropTypes.shape({\r\n    id: PropTypes.string.isRequired,\r\n    title: PropTypes.string.isRequired,\r\n    url: PropTypes.string.isRequired,\r\n    author: PropTypes.string,\r\n    user: PropTypes.shape({\r\n      id: PropTypes.string.isRequired,\r\n      username: PropTypes.string.isRequired,\r\n      name: PropTypes.string\r\n    })\r\n  }),\r\n  handleLikeClick: PropTypes.func.isRequired,\r\n  handleDeleteClick: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default Blog;\r\n","import axios from 'axios';\r\nconst baseUrl = '/api/login';\r\n\r\nconst login = async credentials => {\r\n  const response = await axios.post(baseUrl, credentials);\r\n  return response.data;\r\n};\r\n\r\nexport default { login };","import React, { useState } from 'react';\r\nimport loginService from './../services/login';\r\n\r\nconst handleLogin = async (e, username, password, setUser, setUsername, setPassword, setLoginNote, ls) => {\r\n  e.preventDefault();\r\n  try {\r\n    const user = await loginService.login({\r\n      username, password,\r\n    });\r\n    setUser(user);\r\n    ls.setItem('blogAppUser', JSON.stringify(user));\r\n    setUsername('');\r\n    setPassword('');\r\n    setLoginNote({\r\n      msg: `Welcome ${user.name}!`,\r\n      type: 1,\r\n      length: 5000,\r\n      phase: 1,\r\n    });\r\n  } catch (exception) {\r\n    setLoginNote({\r\n      msg: 'Wrong username or password!',\r\n      type: 2,\r\n      length: 5000,\r\n      phase: 1,\r\n    });\r\n  }\r\n};\r\n\r\nconst loginForm = (username, password, setUser, setUsername, setPassword, setLoginNote, ls) => {\r\n  return (\r\n    <div className=\"login-form form-wrapper\">\r\n      <h3>Login</h3>\r\n      <form onSubmit={(e) => handleLogin(e, username, password, setUser, setUsername, setPassword, setLoginNote, ls)}>\r\n        <div className=\"form-elem form-elem__input-text\">\r\n          <label htmlFor=\"login-user\">\r\n            <span className=\"label-text\">Username:</span>\r\n            <input\r\n              id=\"login-user\"\r\n              className=\"input-text\"\r\n              type=\"text\"\r\n              value={username}\r\n              name=\"Username\"\r\n              onChange={({ target }) => setUsername(target.value)}\r\n            />\r\n          </label>\r\n        </div>\r\n        <div className=\"form-elem form-elem__input-text\">\r\n          <label htmlFor=\"login-pass\">\r\n            <span className=\"label-text\">Password:</span>\r\n            <input\r\n              id=\"login-pass\"\r\n              className=\"input-text\"\r\n              type=\"password\"\r\n              value={password}\r\n              name=\"Password\"\r\n              onChange={({ target }) => setPassword(target.value)}\r\n            />\r\n          </label>\r\n        </div>\r\n        <div className=\"form-elem form-elem__submit\">\r\n          <button type=\"submit\" id=\"login-button\">login</button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst handleLogout = (e, setUser, setLoginNote, ls) => {\r\n  ls.removeItem('blogAppUser');\r\n  setUser(null);\r\n  setLoginNote({\r\n    msg: 'You are now logged out!',\r\n    type: 1,\r\n    length: 5000,\r\n    phase: 1,\r\n  });\r\n};\r\n\r\nconst loginInfo = (user, setUser, setLoginNote, ls) => {\r\n  return (\r\n    <div className=\"logged-in-bar\" style={{\r\n      marginBottom: '12px', paddingBottom: '8px', borderBottom: '2px dashed #bbb'\r\n    }}>\r\n      {user.name} logged in\r\n      &nbsp;\r\n      <button onClick={(e) => handleLogout(e, setUser, setLoginNote, ls)}>logout</button>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst Login = ({ user, setUser, setLoginNote, ls }) => {\r\n  const [username, setUsername] = useState('');\r\n  const [password, setPassword] = useState('');\r\n\r\n  return (\r\n    <div className=\"login-wrapper\">\r\n      { user === null\r\n        ? loginForm(username, password, setUser, setUsername, setPassword, setLoginNote, ls)\r\n        : loginInfo(user, setUser, setLoginNote, ls)\r\n      }\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;","import React, { useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst CreateBlog = ({ handleCreateNew, blogRef }) => {\r\n  const [title, setTitle] = useState('');\r\n  const [author, setAuthor] = useState('');\r\n  const [url, setUrl] = useState('');\r\n\r\n  const addBlog = (e) => {\r\n    e.preventDefault();\r\n    handleCreateNew(title, author, url, setTitle, setAuthor, setUrl);\r\n  };\r\n\r\n  return (\r\n    <div className='create-blog-form form-wrapper'>\r\n      <h3>Create new blog</h3>\r\n      <form onSubmit={addBlog} id='new-blog-form'>\r\n        <div className='form-elem form-elem__input-text'>\r\n          <label htmlFor='create-title'>\r\n            <span className='label-text'>Title *</span>\r\n            <input\r\n              id='create-title'\r\n              className='input-text'\r\n              type='text'\r\n              value={title}\r\n              name='Title'\r\n              onChange={({ target }) => setTitle(target.value)}\r\n            />\r\n          </label>\r\n        </div>\r\n        <div className='form-elem form-elem__input-text'>\r\n          <label htmlFor='create-author'>\r\n            <span className='label-text'>Author</span>\r\n            <input\r\n              id='create-author'\r\n              className='input-text'\r\n              type='text'\r\n              value={author}\r\n              name='Author'\r\n              onChange={({ target }) => setAuthor(target.value)}\r\n            />\r\n          </label>\r\n        </div>\r\n        <div className='form-elem form-elem__input-text'>\r\n          <label htmlFor='create-url'>\r\n            <span className='label-text'>URL *</span>\r\n            <input\r\n              id='create-url'\r\n              className='input-text'\r\n              type='text'\r\n              value={url}\r\n              name='URL'\r\n              onChange={({ target }) => setUrl(target.value)}\r\n            />\r\n          </label>\r\n        </div>\r\n        <div className='form-elem form-elem__submit'>\r\n          <button type='submit' id='create-new-button'>Create new</button>\r\n          {blogRef &&\r\n            <button\r\n              type='button'\r\n              className='cancel-button'\r\n              onClick={() => blogRef.current.toggleVisibility()}>Cancel</button>\r\n          }\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nCreateBlog.propTypes = {\r\n  handleCreateNew: PropTypes.func.isRequired,\r\n  blogRef: PropTypes.object.isRequired\r\n};\r\n\r\nexport default CreateBlog;","import axios from 'axios';\r\nconst baseUrl = '/api/blogs';\r\n\r\nlet token = null;\r\n\r\nconst setToken = newToken => {\r\n  token = `bearer ${newToken}`;\r\n};\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl);\r\n  return request.then(response => response.data);\r\n};\r\n\r\nconst newBlog = async newObject => {\r\n  const config = {\r\n    headers: { Authorization: token },\r\n  };\r\n  const response = await axios.post(baseUrl, newObject, config);\r\n  return response.data;\r\n};\r\n\r\nconst likeBlog = async newObject => {\r\n  const response = await axios.put(baseUrl + '/' + newObject.id, newObject);\r\n  return response.data;\r\n};\r\n\r\nconst deleteBlog = async id => {\r\n  const config = {\r\n    headers: { Authorization: token },\r\n  };\r\n  const response = await axios.delete(baseUrl + '/' + id, config);\r\n  return response.data;\r\n};\r\n\r\nexport default { getAll, setToken, newBlog, likeBlog, deleteBlog };","let localStorageAvailable = false;\r\n\r\nconst initLocalStorage = () => {\r\n  if(lsTest()) {\r\n    localStorageAvailable = true;\r\n  }\r\n};\r\n\r\nconst getItem = (key, defaultValue) => {\r\n  // defaultValue is returned (if provided) if local storage is not available or the key is not found\r\n  if(!localStorageAvailable) return defaultValue || null;\r\n  if(checkIfItemExists(key)) {\r\n    return window.localStorage.getItem(key);\r\n  } else {\r\n    return defaultValue || null;\r\n  }\r\n};\r\n\r\nconst checkIfItemExists = (key) => {\r\n  if(!localStorageAvailable) return false;\r\n  return Object.prototype.hasOwnProperty.call(window.localStorage, key);\r\n};\r\n\r\nconst setItem = (key, value) => {\r\n  if(!localStorageAvailable) return false;\r\n  window.localStorage.setItem(key, value);\r\n  return true;\r\n};\r\n\r\nconst removeItem = (key) => {\r\n  if(!localStorageAvailable) return false;\r\n  if(checkIfItemExists(key)) {\r\n    window.localStorage.removeItem(key);\r\n  }\r\n  return true;\r\n};\r\n\r\nconst lsTest = () => {\r\n  const test = 'testLSAvailability';\r\n  try {\r\n    window.localStorage.setItem(test, test);\r\n    window.localStorage.removeItem(test);\r\n    return true;\r\n  } catch(e) {\r\n    return false;\r\n  }\r\n};\r\n\r\nexport default { initLocalStorage, getItem, setItem, removeItem };","import React, { useState, useEffect, useRef } from 'react';\r\nimport Blog from './components/Blog';\r\nimport Login from './components/Login';\r\nimport NotificationBox from './components/NotificationBox';\r\nimport CreateBlog from './components/CreateBlog';\r\nimport Togglable from './components/Togglable';\r\nimport blogService from './services/blogs';\r\nimport ls from './utils/localStorage';\r\nimport './styles/form-elements.css';\r\nimport './styles/buttons.css';\r\n\r\nconst App = () => {\r\n  const blogRef = useRef();\r\n  const [blogs, setBlogs] = useState([]);\r\n  const [user, setUser] = useState(null);\r\n  const [note, setNote] = useState({ msg: '', type: 0, length: 0, phase :0 });\r\n\r\n  useEffect(() => {\r\n    ls.initLocalStorage();\r\n    const loggedUserJSON = ls.getItem('blogAppUser');\r\n    if(loggedUserJSON) {\r\n      const u = JSON.parse(loggedUserJSON);\r\n      setUser(u);\r\n      blogService.setToken(u.token);\r\n    }\r\n    blogService.getAll().then(blogs =>\r\n      setBlogs(blogs)\r\n    );\r\n  }, []);\r\n\r\n  const handleLikeClick = async (blog, loadingLike, setLoadingLike) => {\r\n    if(loadingLike) return;\r\n    setLoadingLike(true);\r\n    try {\r\n      const userId = blog.user.id;\r\n      const newLikes = blog.likes + 1;\r\n      const body = Object.assign({}, blog, { user: userId, likes: newLikes });\r\n      await blogService.likeBlog(body);\r\n      blog.likes = newLikes;\r\n      let updatedList = blogs.filter((b) => {\r\n        if(b.id !== blog.id) return b;\r\n        return null;\r\n      });\r\n      updatedList = updatedList.concat(blog);\r\n      setBlogs(updatedList);\r\n      setLoadingLike(false);\r\n    } catch (error) {\r\n      setNote({\r\n        msg: 'Error in saving like action.',\r\n        type: 3,\r\n        length: 0,\r\n        phase: 1,\r\n      });\r\n      setLoadingLike(false);\r\n    }\r\n  };\r\n\r\n  const handleDeleteClick = (blog) => {\r\n    setNote({\r\n      msg: `Delete blog: ${blog.title}?`,\r\n      type: 4,\r\n      length: 0,\r\n      phase: 1,\r\n      action: async () => {\r\n        try {\r\n          await blogService.deleteBlog(blog.id);\r\n          let updatedList = blogs.filter((b) => {\r\n            if(b.id !== blog.id) return b;\r\n            return null;\r\n          });\r\n          setBlogs(updatedList);\r\n        } catch (error) {\r\n          setNote({\r\n            msg: 'Error in deleting blog.',\r\n            type: 3,\r\n            length: 0,\r\n            phase: 1,\r\n          });\r\n        }\r\n      }\r\n    });\r\n  };\r\n\r\n  const handleCreateNew = async (\r\n    title, author, url, setTitle, setAuthor, setUrl\r\n  ) => {\r\n    try {\r\n      const result = await blogService.newBlog({\r\n        title, author, url\r\n      });\r\n      const newBlogs = blogs.concat(result);\r\n      setBlogs(newBlogs);\r\n      setTitle('');\r\n      setAuthor('');\r\n      setUrl('');\r\n      setNote({\r\n        msg: `New blog (${title}) saved!`,\r\n        type: 1,\r\n        length: 5000,\r\n        phase: 1,\r\n      });\r\n      if(blogRef) blogRef.current.toggleVisibility();\r\n    } catch (error) {\r\n      if(error.response && error.response.status === 400 && error.response.data.errors !== undefined) {\r\n        const errors = error.response.data.errors;\r\n        if(errors.title !== undefined) {\r\n          setNote({\r\n            msg: 'Title cannot be empty.',\r\n            type: 2,\r\n            length: 5000,\r\n            phase: 1,\r\n          });\r\n          return;\r\n        } else if(errors.url !== undefined) {\r\n          setNote({\r\n            msg: 'URL cannot be empty.',\r\n            type: 2,\r\n            length: 5000,\r\n            phase: 1,\r\n          });\r\n          return;\r\n        }\r\n      }\r\n      setNote({\r\n        msg: 'Error, could not create new blog!',\r\n        type: 3,\r\n        length: 0,\r\n        phase: 1,\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={{\r\n      fontFamily:'sans-serif',\r\n      color:'#333',\r\n      maxWidth: '960px',\r\n      margin: '0 auto'\r\n    }}>\r\n      <h2>Blogs</h2>\r\n      <NotificationBox note={note} setNote={setNote} />\r\n      <Login\r\n        user={user}\r\n        setUser={setUser}\r\n        setLoginNote={setNote}\r\n        ls={ls} />\r\n      {user !== null &&\r\n        <Togglable label='+ New blog' ref={blogRef}>\r\n          <CreateBlog\r\n            handleCreateNew={handleCreateNew}\r\n            blogRef={blogRef} />\r\n        </Togglable>\r\n      }\r\n      <div className='blog-list'>\r\n        {blogs.sort((a, b) => {\r\n          return b.likes - a.likes;\r\n        }).map(blog =>\r\n          <Blog\r\n            key={blog.id}\r\n            blog={blog}\r\n            handleLikeClick={handleLikeClick}\r\n            handleDeleteClick={handleDeleteClick}\r\n            user={user} />\r\n        )}\r\n      </div>\r\n      <footer style={{\r\n        opacity: 0.2, fontSize: '12px', textAlign: 'center', marginTop: '-18px', marginBottom: '50px'\r\n      }}>by Kai Forsman</footer>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}